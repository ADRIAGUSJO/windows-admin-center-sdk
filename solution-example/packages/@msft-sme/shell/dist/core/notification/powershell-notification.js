var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { Observable, Subject } from 'rxjs';
import { Net } from '../data/net';
import { LogLevel } from '../diagnostics/log-level';
import { Logging } from '../diagnostics/logging';
import { NotificationState } from './notification';
import { SocketMessageFlags, SocketSignalR } from './socket-signalr';
/**
 * The PowerShell script based notifiction class.
 */
var PowerShellNotification = (function (_super) {
    __extends(PowerShellNotification, _super);
    /* tslint:enable:no-bitwise */
    /**
     * Initializes a new instance of the GatewaySocket class.
     */
    function PowerShellNotification(gatewayUrl) {
        return _super.call(this, gatewayUrl, PowerShellNotification.connectionUrl, PowerShellNotification.proxyName) || this;
    }
    /* tslint:disable:no-bitwise */
    PowerShellNotification.hasConnectionError = function (item) {
        return (item.type & SocketMessageFlags.ConnectionError) === SocketMessageFlags.ConnectionError;
    };
    PowerShellNotification.hasError = function (item) {
        return (item.type & SocketMessageFlags.Error) === SocketMessageFlags.Error;
    };
    PowerShellNotification.hasException = function (item) {
        return (item.type & SocketMessageFlags.Exception) === SocketMessageFlags.Exception;
    };
    PowerShellNotification.hasCompleted = function (item) {
        return (item.type & SocketMessageFlags.Completed) === SocketMessageFlags.Completed;
    };
    PowerShellNotification.hasData = function (item) {
        return (item.type & SocketMessageFlags.Data) === SocketMessageFlags.Data;
    };
    PowerShellNotification.hasProgress = function (item) {
        return (item.type & SocketMessageFlags.Progress) === SocketMessageFlags.Progress;
    };
    Object.defineProperty(PowerShellNotification.prototype, "subject", {
        /**
         * Gets the subject observable to get notifications.
         */
        get: function () {
            return this.subjectInternal;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Submit PowerShell command as a work item.
     *
     * @param nodeConnection The node connection.
     * @param command The PowerShell command.
     * @param metadata The meta data.
     * @param nodeRequestOptions The node request options.
     * @param create The callback to create new notification.
     * @return Observable the observable of initial powershell query result.
     */
    PowerShellNotification.prototype.submit = function (nodeConnection, nodeName, command, metadata, nodeRequestOptions, create) {
        var _this = this;
        // For a non-powershell long running task (eg: azure site recovery setup): 
        // The 'command' parameter is empty.
        // The metadata.id is the workitem id generated by a gateway api. 
        if (!command && metadata.id) {
            var result = {
                id: metadata.id,
                completed: false,
                error: null,
                state: NotificationState.Started
            };
            if (create) {
                create(result);
            }
            this.subscribeSession(metadata.id);
            return Observable.of({ id: metadata.id, state: NotificationState.Started, error: null });
        }
        var data = Net.createPropertiesJSONString({ command: command, metadata: metadata });
        return nodeConnection.post(nodeName, Net.powerShellApiInvokeCommand, data, nodeRequestOptions)
            .catch(function (error, obj) {
            var result = {
                id: MsftSme.newGuid(),
                completed: true,
                error: { message: Net.getErrorMessage(error) },
                state: NotificationState.Error
            };
            if (create) {
                create(result);
            }
            return Observable.of({ id: result.id, state: result.state, error: result.error });
        })
            .map(function (response) {
            if (response.id) {
                // sending back the client for the error.
                return response;
            }
            var completed = response.completed === 'True';
            var error = null;
            if (response.errors && response.errors.length > 0) {
                var errorObj = MsftSme.first(response.errors);
                error = { message: errorObj.message };
            }
            var result = {
                id: response.sessionId,
                completed: completed,
                error: error,
                state: completed ?
                    (response.errors ? NotificationState.Error : NotificationState.Success)
                    : NotificationState.Started
            };
            if (create) {
                create(result);
            }
            if (!result.completed) {
                _this.subscribeSession(response.sessionId);
            }
            _this.processData(response);
            // sending back the client.
            return { id: result.id, state: result.state, error: error };
        });
    };
    /**
     * Initialize to subscribe the web socket connection.
     */
    PowerShellNotification.prototype.initialize = function () {
        if (this.subjectInternal) {
            this.subjectInternal.complete();
        }
        this.subjectInternal = new Subject();
        this.subscribe(PowerShellNotification.notify);
        return this.start();
    };
    /**
     * Uninitialize to subscribe the web socket connection.
     */
    PowerShellNotification.prototype.uninitialize = function () {
        if (this.subjectInternal) {
            this.subjectInternal.complete();
            this.subjectInternal = null;
        }
        this.unsubscribe(PowerShellNotification.notify);
        this.stop();
    };
    /**
     * Invoke subscribe method to a  session.
     *
     * @param id the session ID of work item.
     * @return Promise the promise object.
     */
    PowerShellNotification.prototype.subscribeSession = function (id) {
        return this.invoke(PowerShellNotification.subscribe, id);
    };
    /**
     * The client handler to process message.
     *
     * @param notification the message notification.
     */
    PowerShellNotification.prototype.clientHandler = function (notification) {
        this.subjectInternal.next(notification);
    };
    /**
     * Process the message.
     *
     * @param messages the messages.
     */
    PowerShellNotification.prototype.processMessage = function (message) {
        if (!message) {
            var message2 = MsftSme.resourcesStrings().MsftSmeShell.Core.Error.NotificationEmptyMessage.message;
            Logging.log({ source: 'socket', level: LogLevel.Warning, message: message2 });
            return;
        }
        var data = JSON.parse(message);
        this.processData(data);
    };
    PowerShellNotification.prototype.processData = function (data) {
        /* tslint:disable:no-bitwise */
        var type = SocketMessageFlags.None;
        if (data.results && data.results.length > 0) {
            type |= SocketMessageFlags.Data;
        }
        if (data.progress && data.progress.length > 0) {
            type |= SocketMessageFlags.Progress;
        }
        if (data.errors && data.errors.length > 0) {
            type |= SocketMessageFlags.Error;
        }
        if (data.exception) {
            type |= SocketMessageFlags.Exception;
        }
        if (data.completed === 'True') {
            type |= SocketMessageFlags.Completed;
        }
        /* tslint:enable:no-bitwise */
        this.clientHandler({ type: type, message: data });
    };
    return PowerShellNotification;
}(SocketSignalR));
export { PowerShellNotification };
PowerShellNotification.connectionUrl = '/api/notifications';
PowerShellNotification.proxyName = 'notificationHub';
PowerShellNotification.notify = 'notify';
PowerShellNotification.subscribe = 'Subscribe';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbm90aWZpY2F0aW9uL3Bvd2Vyc2hlbGwtbm90aWZpY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQWEsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV0RCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRWxDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDakQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUFpQixrQkFBa0IsRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQXlCcEY7O0dBRUc7QUFDSDtJQUE0QywwQ0FBd0M7SUFnQ2hGLDhCQUE4QjtJQUU5Qjs7T0FFRztJQUNILGdDQUFZLFVBQWtCO2VBQzFCLGtCQUFNLFVBQVUsRUFBRSxzQkFBc0IsQ0FBQyxhQUFhLEVBQUUsc0JBQXNCLENBQUMsU0FBUyxDQUFDO0lBQzdGLENBQUM7SUFoQ0QsK0JBQStCO0lBQ2pCLHlDQUFrQixHQUFoQyxVQUFpQyxJQUE4QztRQUMzRSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxLQUFLLGtCQUFrQixDQUFDLGVBQWUsQ0FBQztJQUNuRyxDQUFDO0lBRWEsK0JBQVEsR0FBdEIsVUFBdUIsSUFBOEM7UUFDakUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxLQUFLLENBQUM7SUFDL0UsQ0FBQztJQUVhLG1DQUFZLEdBQTFCLFVBQTJCLElBQThDO1FBQ3JFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsa0JBQWtCLENBQUMsU0FBUyxDQUFD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RyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksSUFBSSxrQkFBa0IsQ0FBQyxLQUFLLENBQUM7UUFDckMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksSUFBSSxrQkFBa0IsQ0FBQyxTQUFTLENBQUM7UUFDekMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztZQUM1QixJQUFJLElBQUksa0JBQWtCLENBQUMsU0FBUyxDQUFDO1FBQ3pDLENBQUM7UUFFRCw4QkFBOEI7UUFFOUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUNMLDZCQUFDO0FBQUQsQ0E5TkEsQUE4TkMsQ0E5TjJDLGFBQWE7O0FBQ3RDLG9DQUFhLEdBQUcsb0JBQW9CLENBQUM7QUFDckMsZ0NBQVMsR0FBRyxpQkFBaUIsQ0FBQztBQUM5Qiw2QkFBTSxHQUFHLFFBQVEsQ0FBQztBQUNsQixnQ0FBUyxHQUFHLFdBQVcsQ0FBQyIsImZpbGUiOiJwb3dlcnNoZWxsLW5vdGlmaWNhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJDOi9CQS8xMzEvcy9pbmxpbmVTcmMvIn0=